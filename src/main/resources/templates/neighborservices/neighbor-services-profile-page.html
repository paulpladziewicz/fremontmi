<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{partials/head :: head('FremontMI - NeighborService')}"></head>
<body>
<header th:insert="~{partials/navbar}"></header>

<main>
    <div class="container my-4">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <nav aria-label="breadcrumb">
                    <ol class="pt-lg-3 pb-lg-4 pb-2 breadcrumb">
                        <li class="breadcrumb-item"><a href="/neighbor-services">NeighborServices™</a></li>
                        <li class="breadcrumb-item active" aria-current="page" th:text="${neighborServicesProfile.name}"></li>
                    </ol>
                </nav>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="mb-3" th:if="${neighborServicesProfile.status == 'requires_active_subscription'}">
                    <span class="badge bg-danger bg-opacity-10 text-danger fs-sm">Not Active - Requires Subscription</span>
                    <p class="m-0"><a th:href="'/pay/subscription?contentId=' + ${business.getId()}" class="p-0 ms-2 btn btn-link">Pay Subscription</a></p>
                </div>
                <h1 th:text="${neighborServicesProfile.name}" class="display-3 mb-0">Fremont Business Name</h1>

                <div class="row mt-4">
                    <p th:text="${neighborServicesProfile.description}" class="fs-xl">Morbi et massa fames ac scelerisque sit commodo dignissim <strong>faucibus quisque proin</strong> lectus laoreet sem adipiscing sollicitudin erat massa tellus lorem enim aenean phasellus in hendrerit interdum lorem proin pretium dictum urna suspendisse quis risus et.</p>
                </div>


                <div class="row mt-4">

                    <h3 class="mb-3 fs-1">NeighborServices™</h3>

                    <div th:if="${neighborServicesProfile.neighborServices.size() > 0}">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item" th:each="service : ${neighborServicesProfile.neighborServices}">
                                <h4 th:text="${service.name}"></h4>
                                <p th:text="${service.description}"></p>
                            </li>
                        </ul>
                    </div>

                    <div th:if="${neighborServicesProfile.neighborServices.size() == 0}">
                        <p class="text-muted">No services available at this time.</p>
                    </div>
                </div>

                <a th:if="${myProfile}" th:href="'/edit/neighbor-service/profile/' + ${neighborServicesProfile.slug}" class="d-inline-block btn btn-outline-primary">Edit NeighborServices™ Profile</a>

            </div>

        </div>

    </div>

</main>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const success = urlParams.get('subscribed');

        if (success === 'true') {
            // Show the success message
            // document.getElementById('success-message').style.display = 'block';

            // Trigger confetti effect
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });

            // Optionally, add a more extended confetti burst
            const duration = 5 * 1000; // 5 seconds
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                // since particles fall down, start a bit higher than random
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
                }));
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
                }));
            }, 250);
        }
    });
</script>
<footer th:replace="~{partials/footer}"></footer>
<script th:replace="~{partials/theme-js}"></script>
</body>
</html>